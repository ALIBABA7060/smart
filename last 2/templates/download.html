<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Download Attendance</title>
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet" />
<style>
  body {
    background: 
      linear-gradient(135deg, #ffffffff 70%, #ffffffff 100%), 
      url('https://media.istockphoto.com/id/1392743825/photo/children-running-out-from-school-by-opening-gate-after-the-bell-concept-of-education-freedom.jpg?s=612x612&w=0&k=20&c=z_dS1GkX1DG7m36HvIPr4QeQY-v6X8fS7SxNY2GF4TU=') no-repeat center center fixed;
    background-size: cover;
    font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
    color: #2c3e50;
    min-height: 100vh;
    overflow-x: hidden;
    position: relative;
    padding-top: 100px;
  }
  .navbar {
    position: fixed;
    top: 0; left: 0; width: 100%; z-index: 1030;
    backdrop-filter: saturate(180%) blur(14px);
    background: rgba(27, 26, 26, 0.89) !important;
    box-shadow: 0 6px 22px rgba(0,0,0,0.15);
  }
  .navbar-brand {
    font-weight: 700;
    font-size: 1.85rem;
    letter-spacing: 0.08em;
    color: #f8f9fa !important;
    text-transform: uppercase;
    text-shadow: 0 2px 12px #263a68,0 1px 0 #fff;
  }
  .navbar-nav .nav-link {
    font-weight: 600;
    color: #d1d9ff !important;
    padding: 0.5rem 1rem;
    text-transform: uppercase;
    letter-spacing: 0.04em;
  }
  .navbar-nav .nav-link:hover, .navbar-nav .nav-link.active {
    color: #fff !important;
    text-decoration: underline;
    text-underline-offset: 4px;
  }
  .glass-card {
    max-width: 480px;
    margin: 7rem auto 0;
    background: rgba(255,255,255,0.28);
    border-radius: 20px;
    box-shadow: 0 9px 38px rgba(44,62,80,0.13), 0 2px 4px rgba(26,35,126,0.25);
    backdrop-filter: blur(19px) saturate(120%);
    border: 1.5px solid rgba(255,255,255,0.19);
    padding: 2.5rem 2rem;
    text-align: center;
    opacity: 0; transform: translateY(40px) scale(0.95);
    animation: fadeInCard 0.7s cubic-bezier(.2,1,.29,.9) 0.15s forwards;
  }
  @keyframes fadeInCard { to { opacity: 1; transform: translateY(0) scale(1); } }
  h2 {
    font-weight: 900;
    color: #27ae60;
    margin-bottom: 2rem;
    font-size: 2.25rem;
    text-transform: uppercase;
    letter-spacing: 0.06em;
    text-shadow: 0 3px 14px rgba(39,174,96,0.17), 0 1px 0 #fff;
    opacity: 0; transform: translateY(18px);
    animation: fadeInH2 0.7s cubic-bezier(.2,1,.29,.9) 0.28s forwards;
  }
  @keyframes fadeInH2 { to { opacity: 1; transform: translateY(0); } }
  .btn {
    min-width: 160px;
    margin: 0 12px;
    font-weight: 700;
    font-size: 1.15rem;
    padding: 0.8rem 2rem;
    border-radius: 50px;
    transition: all 0.3s ease, transform 0.23s ease;
    box-shadow: 0 6px 18px rgba(39,174,96,0.13);
  }
  .btn-success {
    background: linear-gradient(100deg,#27ae60 85%, #2ecc71 100%);
    border-color: #27ae60;
    color: #fff;
    box-shadow: 0 6px 20px rgba(39, 174, 96, 0.36);
  }
  .btn-success:hover, .btn-success:focus {
    background: linear-gradient(100deg, #219150 85%, #2ecc71 100%);
    box-shadow: 0 12px 32px rgba(33, 145, 80, 0.45);
    transform: translateY(-3px) scale(1.05);
    outline: none;
  }
  .btn-secondary {
    background: linear-gradient(98deg,#67758f 85%, #404a60 100%);
    border-color: #67758f;
    color: #fff;
    box-shadow: 0 6px 18px rgba(103,117,143,0.18);
  }
  .btn-secondary:hover, .btn-secondary:focus {
    background: linear-gradient(98deg,#4b5770 85%, #232b40 100%);
    box-shadow: 0 12px 32px rgba(75,87,112,0.42);
    transform: translateY(-3px) scale(1.05);
    outline: none;
  }
  .btn-container {
    display: flex;
    justify-content: center;
    flex-wrap: wrap;
    gap: 1.1rem;
    margin-top: 2.8rem;
  }
  @media (max-width:600px) {
    .glass-card { padding: 1rem; margin-top: 5rem; }
    h2 { font-size: 1.45rem; }
    .btn-container { margin-top: 2.2rem; flex-direction: column; gap: 1.6rem; }
  }
</style>
</head>
<body>
  <!-- Navbar -->
  <nav class="navbar navbar-expand-lg navbar-dark">
    <div class="container-fluid">
      <a class="navbar-brand" href="{{ url_for('index') }}">AI Attendance</a>
      <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav" 
        aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
        <span class="navbar-toggler-icon"></span>
      </button>
      <div class="collapse navbar-collapse" id="navbarNav">
        <ul class="navbar-nav ms-auto">
          <li class="nav-item"><a class="nav-link" href="{{ url_for('index') }}">Home</a></li>
          <li class="nav-item"><a class="nav-link" href="{{ url_for('dashboard') }}">Dashboard</a></li>
          <li class="nav-item"><a class="nav-link" href="{{ url_for('students') }}">Student Details</a></li>
          <li class="nav-item"><a class="nav-link" href="{{ url_for('take_attendance') }}">Take Attendance</a></li>
          <li class="nav-item"><a class="nav-link" href="{{ url_for('logout') }}">Logout</a></li>
        </ul>
      </div>
    </div>
  </nav>

  <!-- Card -->
  <div class="glass-card">
    <h2>âœ… Attendance Saved!</h2>
    <div class="btn-container">
      <a href="{{ url_for('download', filename=filename) }}" class="btn btn-success">Download CSV</a>
      <a href="{{ url_for('index') }}" class="btn btn-secondary">Back to Home</a>
    </div>
  </div>

  <!-- Scripts -->
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js"></script>
  <script>
    window.addEventListener('load', () => {
      const duration = 2300;
      const end = Date.now() + duration;
      const colors = ['#bb0000', '#ffffff', '#27ae60', '#f1c40f', '#3498db', '#2ecc71'];
      (function frame() {
        confetti({ particleCount: 7, angle: 60, spread: 55, origin: { x: 0 }, colors: colors });
        confetti({ particleCount: 7, angle: 120, spread: 55, origin: { x: 1 }, colors: colors });
        if (Date.now() < end) requestAnimationFrame(frame);
      })();
    });
  </script>
</body>
</html>
